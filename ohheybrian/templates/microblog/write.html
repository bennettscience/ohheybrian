{% extends "_layout.html" %} {% block main_content %}
<a href="{{ url_for('admin.admin_posts')}}">Back</a>
<div class="admin container with-sidebar">
  <form class="not-sidebar" hx-trigger="submit" hx-post="/admin/posts/add">
    <h2>New Post</h2>
    <label
      >Title
      <input
        name="title"
        type="text"
        {%
        if
        post
        %}value="{{post.title}}"
        {%
        endif
        %}
      />
    </label>
    <textarea name="post_body" id="post_body">
{% if post %}{{post_body}}{% endif %}</textarea
    >
    <label
      >Tags
      <input
        type="text"
        name="tags"
        autocomplete="off"
        {%
        if
        post
        %}value="{{', '.join(tags)}}"
        {%
        endif
        %}
      />
    </label>
    <label for="published"
      >Published:
      <input
        type="checkbox"
        name="published"
        {%
        if
        published
        %}checked{%
        endif
        %}
      />
    </label>
    <input type="submit" value="Save" />
  </form>
  <form
    class="sidebar"
    id="img-upload"
    hx-post="{{ url_for('admin.save_new_image') }}"
    hx-encoding="multipart/form-data"
    hx-target="#result"
    hx-swap="innerHTML"
  >
    <input type="file" name="file" accept=".jpg,.jpeg,.png,.webp" />
    <input type="submit" value="Upload" />
  </form>
  <img id="result" src="" />
</div>
{% endblock %}
