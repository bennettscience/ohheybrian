{% extends "_layout.html" %} {% block main_content %}
<a href="{{ url_for('admin.admin_posts')}}">Back</a>
<div class="admin container with-sidebar">
  <form class="not-sidebar" hx-trigger="submit" {{method}}="{{endpoint}}">
    <h2>{{editor_title}}</h2>
    <label
      >Title
      <input
        name="title"
        type="text"
        {%
        if
        post
        %}value="{{post.title}}"
        {%
        endif
        %}
      />
    </label>
    <textarea name="post_body" id="post_body">
{% if post %}{{post_body}}{% endif %}</textarea
    >
    <label
      >Tags
      <input
        type="text"
        name="tags"
        autocomplete="off"
        {%
        if
        post
        %}value="{{', '.join(tags)}}"
        {%
        endif
        %}
      />
    </label>
    <label for="published"
      >Published:
      <input
        type="checkbox"
        name="published"
        {%
        if
        post.published
        %}checked="checked"
        {%
        endif
        %}
      />
    </label>
    <input type="submit" value="Save" />
  </form>
  <div class="sidebar">
    <div class="post-search">
      <input
        type="search"
        value=""
        name="search"
        placeholder="Search posts"
        hx-post="/search"
        hx-trigger="input changed delay:500ms, keyup[key=='Enter']"
        hx-target="#search-results"
      />
    </div>
    <div id="search-results"></div>
    <form
      id="img-upload"
      hx-post="{{ url_for('admin.save_new_image') }}"
      hx-encoding="multipart/form-data"
      hx-target="#result"
      hx-swap="innerHTML"
    >
      <input type="file" name="file" accept=".jpg,.jpeg,.png,.webp" />
      <input type="submit" value="Upload" />
    </form>
    <img id="result" src="" />
  </div>
</div>
{% endblock %}
